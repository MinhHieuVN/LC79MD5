<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TX Prediction AI</title>

<style>
body{
background:#0a0f1f;
color:#00ffff;
font-family:Arial;
text-align:center;
}

.box{
max-width:600px;
margin:auto;
padding:20px;
}

button{
padding:10px 20px;
margin:10px;
border:none;
border-radius:10px;
background:linear-gradient(45deg,#00ffff,#ff00ff);
font-weight:bold;
}

.result{
margin-top:20px;
padding:20px;
border:1px solid #00ffff;
border-radius:15px;
}
</style>
</head>

<body>

<div class="box">

<h2>ü§ñ TX PREDICTION AI</h2>

<button onclick="predict()">D·ª± ƒêo√°n</button>

<div class="result" id="output"></div>

</div>

<script>

const proxy="https://corsproxy.io/?";
const api="https://wtxmd52.tele68.com/v1/txmd5/sessions";

async function getData(){
let res=await fetch(proxy+api);
let data=await res.json();
return data.list || data;
}

function analyze(data){

let recent=data.slice(0,50);

let tai=0;
let xiu=0;

recent.forEach(item=>{
if(item.resultTruyenThong==="TAI") tai++;
else xiu++;
});

let percentTai=(tai/recent.length)*100;
let percentXiu=(xiu/recent.length)*100;

// Ki·ªÉm tra streak
let streakCount=1;
let last=recent[0].resultTruyenThong;

for(let i=1;i<recent.length;i++){
if(recent[i].resultTruyenThong===last){
streakCount++;
}else{
break;
}
}

// Ki·ªÉm tra ƒë·∫£o li√™n t·ª•c 1-1
let dao=true;
for(let i=1;i<6;i++){
if(recent[i].resultTruyenThong===recent[i-1].resultTruyenThong){
dao=false;
break;
}
}

// T√≠nh ƒëi·ªÉm quy·∫øt ƒë·ªãnh
let scoreTai=percentTai;
let scoreXiu=percentXiu;

// tr·ªçng s·ªë phi√™n g·∫ßn nh·∫•t
if(last==="TAI") scoreTai+=5;
else scoreXiu+=5;

// n·∫øu streak >=3 c√≥ xu h∆∞·ªõng ƒë·∫£o
if(streakCount>=3){
if(last==="TAI") scoreXiu+=10;
else scoreTai+=10;
}

// n·∫øu c·∫ßu 1-1 ‚Üí ti·∫øp t·ª•c ƒë·∫£o
if(dao){
if(last==="TAI") scoreXiu+=15;
else scoreTai+=15;
}

let prediction=scoreTai>scoreXiu?"TAI":"XIU";
let confidence=Math.abs(scoreTai-scoreXiu).toFixed(2);

return {
prediction,
confidence,
percentTai:percentTai.toFixed(2),
percentXiu:percentXiu.toFixed(2),
streak:last+" x"+streakCount
};
}

async function predict(){

document.getElementById("output").innerHTML="ƒêang t√≠nh...";

try{

let data=await getData();
let result=analyze(data);

document.getElementById("output").innerHTML=`
<h3>D·ª± ƒëo√°n: ${result.prediction}</h3>
<p>ƒê·ªô ch√™nh l·ªách ƒëi·ªÉm: ${result.confidence}</p>
<p>% T√†i: ${result.percentTai}%</p>
<p>% X·ªâu: ${result.percentXiu}%</p>
<p>Streak hi·ªán t·∫°i: ${result.streak}</p>
`;

}catch(e){
document.getElementById("output").innerHTML="L·ªói l·∫•y API";
}

}

</script>

</body>
</html>
