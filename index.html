<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TX CYBER ULTIMATE X MAX++</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
margin:0;
background:#030312;
font-family:Arial;
color:#00ffff;
text-align:center;
}

.container{
width:95%;
max-width:650px;
margin:20px auto;
background:#000;
padding:20px;
border-radius:25px;
box-shadow:0 0 40px #00ffff;
animation:glow 2s infinite alternate;
}

@keyframes glow{
from{box-shadow:0 0 20px #00ffff;}
to{box-shadow:0 0 50px #ff00ff;}
}

.title{
font-size:26px;
margin-bottom:15px;
}

.box{
background:#071c1c;
padding:12px;
margin:8px 0;
border-radius:15px;
box-shadow:0 0 15px #00ffff inset;
}

button{
padding:10px 18px;
border:none;
border-radius:12px;
margin:8px;
font-weight:bold;
background:linear-gradient(45deg,#00ffff,#ff00ff);
color:#000;
}

.win{color:#00ff00;}
.lose{color:#ff0000;}
.tai{color:#ff4444;}
.xiu{color:#44aaff;}
.alert{color:#ffff00;}
</style>
</head>

<body>

<div class="container">

<div class="title">üî• TX CYBER ULTIMATE X MAX++</div>

<div id="predict" class="box">ƒêang ph√¢n t√≠ch...</div>
<div id="confidence" class="box"></div>
<div id="stats" class="box"></div>
<div id="alertBox" class="box"></div>

<canvas id="chart"></canvas>

<button onclick="loadData()">Refresh</button>
<button onclick="toggleTurbo()">Turbo</button>
<button onclick="resetStats()">Reset</button>

<div id="history"></div>

</div>

<script>

let turbo=false;
let win=localStorage.getItem("win")||0;
let lose=localStorage.getItem("lose")||0;
let lastPrediction="";
let lastResult="";

const proxies=[
"https://corsproxy.io/?",
"https://api.allorigins.win/raw?url="
];

const baseAPI="https://wtxmd52.tele68.com/v1/txmd5/sessions";

async function fetchWithFallback(){
for(let proxy of proxies){
try{
let res=await fetch(proxy+baseAPI);
if(res.ok) return await res.json();
}catch(e){}
}
alert("Kh√¥ng l·∫•y ƒë∆∞·ª£c API");
return [];
}

async function loadData(){

let data=await fetchWithFallback();
if(!data.length) return;

let tai=0,xiu=0;
let historyHTML="";
let results=[];

data.slice(0,100).forEach(item=>{

let result=item.resultTruyenThong;
results.push(result);

if(result=="TAI") tai++; else xiu++;

historyHTML+=`
<div class="box">
Phi√™n: ${item.id} |
T·ªïng: ${item.point} |
X√∫c x·∫Øc: ${item.dices.join("-")} |
<b class="${result=='TAI'?'tai':'xiu'}">${result}</b>
</div>
`;
});

document.getElementById("history").innerHTML=historyHTML;

let prediction=analyze(results);
let confidence=calculateConfidence(results);

if(lastPrediction){
if(results[0]==lastPrediction){
win++;
}else{
lose++;
}
}

localStorage.setItem("win",win);
localStorage.setItem("lose",lose);

lastPrediction=prediction;
lastResult=results[0];

document.getElementById("predict").innerHTML=
"D·ª± ƒëo√°n: <b>"+prediction+"</b>";

document.getElementById("confidence").innerHTML=
"ƒê·ªô tin c·∫≠y: "+confidence+"%";

document.getElementById("stats").innerHTML=
"T√†i: "+tai+" | X·ªâu: "+xiu+
"<br>Win: "+win+" | Lose: "+lose;

alertStreak(results);

drawChart(tai,xiu);

}

function analyze(results){

let last=results[0];
let streak=1;

for(let i=1;i<results.length;i++){
if(results[i]==last) streak++;
else break;
}

if(streak>=4){
return last=="TAI"?"XIU":"TAI";
}

let taiCount=results.filter(r=>r=="TAI").length;
let xiuCount=results.length-taiCount;

if(Math.abs(taiCount-xiuCount)>10){
return taiCount>xiuCount?"XIU":"TAI";
}

return Math.random()>0.5?"TAI":"XIU";
}

function calculateConfidence(results){

let score=50;

let taiCount=results.filter(r=>r=="TAI").length;
let xiuCount=results.length-taiCount;

score+=Math.abs(taiCount-xiuCount)/2;

let last=results[0];
let streak=1;
for(let i=1;i<results.length;i++){
if(results[i]==last) streak++;
else break;
}

if(streak>=3) score+=10;

if(score>95) score=95;

return score.toFixed(1);
}

function alertStreak(results){

let last=results[0];
let streak=1;
for(let i=1;i<results.length;i++){
if(results[i]==last) streak++;
else break;
}

if(streak>=5){
document.getElementById("alertBox").innerHTML=
"‚ö†Ô∏è Chu·ªói "+last+" ƒë√£ "+streak+" phi√™n!";
}else{
document.getElementById("alertBox").innerHTML="Kh√¥ng c√≥ chu·ªói d√†i.";
}
}

function drawChart(tai,xiu){
new Chart(document.getElementById("chart"),{
type:'bar',
data:{
labels:['TAI','XIU'],
datasets:[{
data:[tai,xiu]
}]
}
});
}

function toggleTurbo(){
turbo=!turbo;
if(turbo){
setInterval(loadData,4000);
}
}

function resetStats(){
win=0;lose=0;
localStorage.clear();
}

loadData();

</script>

</body>
</html>
